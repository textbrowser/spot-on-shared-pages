Genetic mechanism reveals how plants coordinate flowering with light and temperature conditions