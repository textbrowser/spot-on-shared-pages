New test improves diagnosis of allergies